{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hemko\\\\OneDrive - Otago Polytechnic\\\\01_Courses\\\\10_Studio_03\\\\03_Others\\\\Eco-shop\\\\src\\\\components\\\\Checkout.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Alert, Button, Form, InputGroup, Modal } from \"react-bootstrap\";\nimport Footer from \"./Footer\";\nimport '../css/Checkout.css';\nimport CheckoutService from \"../context/CheckoutServices\";\nimport HeaderSwitcher from \"./HeaderSwitcher\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useLocation } from 'react-router-dom';\nimport { getAuth } from \"firebase/auth\"; // Import Firebase authentication\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Checkout() {\n  _s();\n  var _location$state;\n  // State variables for managing checkout details\n  const [discountCode, setDiscountCode] = useState([]);\n  const [appliedDiscount, setAppliedDiscount] = useState(null);\n  const [cardNumber, setCardNumber] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [region, setRegion] = useState(\"\");\n  const [zipCode, setZipCode] = useState(\"\");\n  const [message, setMessage] = useState({\n    error: false,\n    msg: \"\"\n  });\n  const [country, setCountry] = useState(\"\");\n  const [subTotal, setSubTotal] = useState(0.00);\n  const [discount, setDiscount] = useState(0.00);\n  const [serverFee, setServerFee] = useState(0.00);\n  const [totalCost, setTotalCost] = useState(0.00);\n  const [showModal, setShowModal] = useState(false);\n  const [showErrorModal, setShowErrorModal] = useState(false);\n  const [missingFields, setMissingFields] = useState([]);\n\n  // Get the list of selected products from the current location's state\n  const location = useLocation();\n  const selectedProducts = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.selectedProducts) || [];\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Calculate subtotal, server fee, and total cost when products change\n    let subtotal = selectedProducts.reduce((acc, item) => acc + item.productPrice, 0);\n    setSubTotal(subtotal);\n    const serverPercentage = 0.15; // 15% server fee\n    const serverValue = subtotal * serverPercentage;\n    setServerFee(serverValue);\n    const totalCost = subtotal + serverValue;\n    setTotalCost(totalCost);\n  }, [selectedProducts]);\n\n  // Discount codes and their corresponding discounts\n  const discountCodes = {\n    \"DISCOUNT50\": 0.50,\n    // 50% discount\n    \"DISCOUNT20\": 0.20,\n    // 20% discount\n    \"DISCOUNT15\": 0.15,\n    // 15% discount\n    \"DISCOUNT10\": 0.10 // 10% discount\n  };\n  const handleApplyDiscount = () => {\n    // Apply discount based on the provided code\n    const discountPercentage = discountCodes[discountCode.toUpperCase()] || 0;\n    if (discountPercentage > 0) {\n      const discountValue = subTotal * discountPercentage;\n      const newTotalCost = subTotal - discountValue + serverFee;\n      setDiscount(discountValue);\n      setTotalCost(newTotalCost);\n      setDiscountCode('');\n      setMessage({\n        error: false,\n        msg: \"Discount applied successfully!\"\n      });\n    } else {\n      setMessage({\n        error: true,\n        msg: \"Invalid discount code!\"\n      });\n    }\n  };\n  const handleRemoveDiscount = () => {\n    // Remove the discount and recalculate total cost\n    const newTotalCost = subTotal + serverFee;\n    setDiscount(0);\n    setTotalCost(newTotalCost);\n    setAppliedDiscount(null);\n    setMessage({\n      error: false,\n      msg: \"Discount removed successfully!\"\n    });\n  };\n  const handleCardNumberChange = e => {\n    // Format the card number with spaces after every 4 digits\n    const {\n      value\n    } = e.target;\n    let formattedValue = value.replace(/\\D/g, '');\n    formattedValue = formattedValue.replace(/(\\d{4})(?=\\d)/g, '$1 ');\n    setCardNumber(formattedValue);\n  };\n\n  // Simple encryption for the card number\n  function simpleEncrypt(cardNumber) {\n    return cardNumber.split('').map(char => String.fromCharCode(char.charCodeAt(0) + 3)).join('');\n  }\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Get the logged-in user's ID from Firebase Auth\n    const auth = getAuth();\n    const user = auth.currentUser;\n    const userId = user ? user.uid : null;\n    if (!userId) {\n      setMessage({\n        error: true,\n        msg: \"User not logged in!\"\n      });\n      return;\n    }\n    setMessage(\"\");\n    setMissingFields([]);\n\n    // Check for any missing mandatory fields\n    let missingFields = [];\n    if (address === \"\") missingFields.push(\"Street Address\");\n    if (city === \"\") missingFields.push(\"City\");\n    if (region === \"\") missingFields.push(\"State/Province/Region\");\n    if (zipCode === \"\") missingFields.push(\"Zip/Postal Code\");\n    if (country === \"\") missingFields.push(\"Country\");\n    if (cardNumber === \"\") missingFields.push(\"Card Number\");\n    if (missingFields.length > 0) {\n      setMissingFields(missingFields);\n      setShowErrorModal(true);\n      return;\n    }\n    const encryptedCardNumber = simpleEncrypt(cardNumber);\n    const checkoutData = {\n      paymentId: \"\",\n      userId: userId,\n      cardNumber: encryptedCardNumber || \"\",\n      address: address || \"\",\n      city: city || \"\",\n      region: region || \"\",\n      zipCode: zipCode || \"\",\n      country: country || \"\",\n      serverFee: serverFee.toFixed(2),\n      totalCost: totalCost.toFixed(2),\n      items: selectedProducts.map(item => ({\n        productName: item.productName || \"Unknown Product\",\n        productDescription: item.productDescription || \"\",\n        productPrice: item.productPrice || 0,\n        imageUrls: item.imageUrls || \"\",\n        sellerId: item.sellerId || \"Unknown Seller\"\n      }))\n    };\n    try {\n      await CheckoutService.addCheckout(checkoutData, userId);\n      setMessage({\n        error: false,\n        msg: \"Payment successful!\"\n      });\n      setShowModal(true);\n    } catch (err) {\n      setMessage({\n        error: true,\n        msg: err.message\n      });\n    }\n\n    // Reset the form fields after successful payment\n    setAddress(\"\");\n    setCity(\"\");\n    setCountry(\"\");\n    setRegion(\"\");\n    setZipCode(\"\");\n    setCardNumber(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 box\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(HeaderSwitcher, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main-content\",\n          children: [(message === null || message === void 0 ? void 0 : message.msg) && /*#__PURE__*/_jsxDEV(Alert, {\n            variant: message !== null && message !== void 0 && message.error ? \"danger\" : \"success\",\n            dismissible: true,\n            onClose: () => setMessage(\"\"),\n            children: message === null || message === void 0 ? void 0 : message.msg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-center mb-4\",\n            children: \"Checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"products-history\",\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Products History\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this), selectedProducts.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row justify-content-center\",\n            children: selectedProducts.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-body\",\n                  children: [item.imageUrls && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: item.imageUrls[0],\n                      alt: item.productName,\n                      className: \"card-img-top\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false), /*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"card-title\",\n                    children: item.productName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"card-text\",\n                    children: item.productDescription\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"card-text\",\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [\"Price: $\", item.productPrice]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 62\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 33\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 29\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 25\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Your cart is empty.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: handleSubmit,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-box\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-container\",\n                  children: [/*#__PURE__*/_jsxDEV(InputGroup, {\n                    className: \"input-width\",\n                    children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"text\",\n                      placeholder: \"Discount Code\",\n                      maxLength: 10,\n                      value: discountCode,\n                      onChange: e => setDiscountCode(e.target.value)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 219,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"success\",\n                    size: \"md\",\n                    className: \"apply-button\",\n                    onClick: handleApplyDiscount,\n                    children: \"Apply\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"danger\",\n                    size: \"md\",\n                    className: \"remove-button\",\n                    onClick: handleRemoveDiscount,\n                    children: \"Remove\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  controlId: \"formCardNumber\",\n                  children: /*#__PURE__*/_jsxDEV(InputGroup, {\n                    children: [/*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                      id: \"formCardNumber\",\n                      children: \"Card Number \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"text\",\n                      placeholder: \"xxxx xxxx xxxx xxxx\",\n                      maxLength: 19,\n                      value: cardNumber,\n                      onChange: e => handleCardNumberChange(e),\n                      style: {\n                        width: \"100%\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  controlId: \"formAddress\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Street Address\",\n                    value: address,\n                    onChange: e => setAddress(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  controlId: \"formCity\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"City\",\n                    value: city,\n                    onChange: e => setCity(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  controlId: \"formRegion\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"State/Province/Region\",\n                    value: region,\n                    onChange: e => setRegion(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 274,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  controlId: \"formZipCode\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Zip/Postal Code\",\n                    value: zipCode,\n                    onChange: e => setZipCode(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  controlId: \"formCountry\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Country\",\n                    value: country,\n                    onChange: e => setCountry(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-footer\",\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"primary\",\n                    size: \"lg\",\n                    type: \"submit\",\n                    style: {\n                      width: \"100%\"\n                    },\n                    children: \"Place Order\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 298,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-box\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Order Summary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Subtotal:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"$\", subTotal.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Discount:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"-$\", discount.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Server Fee:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 319,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"$\", serverFee.toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 320,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"summary-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Total Cost:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 323,\n                      columnNumber: 47\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [\"$\", totalCost.toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 324,\n                      columnNumber: 47\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      onHide: () => setShowModal(false),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Payment Successful\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: \"Your payment has been processed successfully. Thank you for your purchase!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => navigate('/order-history'),\n          children: \"Go to Order History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => navigate('/'),\n          children: \"Back to Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showErrorModal,\n      onHide: () => setShowErrorModal(false),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Missing Fields\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please fill in the following required fields:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: missingFields.map((field, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: field\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: () => setShowErrorModal(false),\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(Checkout, \"uab5HvKCCrHmsBXz8XSjYJ000gI=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useState","useEffect","Alert","Button","Form","InputGroup","Modal","Footer","CheckoutService","HeaderSwitcher","useNavigate","useLocation","getAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","Checkout","_s","_location$state","discountCode","setDiscountCode","appliedDiscount","setAppliedDiscount","cardNumber","setCardNumber","address","setAddress","city","setCity","region","setRegion","zipCode","setZipCode","message","setMessage","error","msg","country","setCountry","subTotal","setSubTotal","discount","setDiscount","serverFee","setServerFee","totalCost","setTotalCost","showModal","setShowModal","showErrorModal","setShowErrorModal","missingFields","setMissingFields","location","selectedProducts","state","navigate","subtotal","reduce","acc","item","productPrice","serverPercentage","serverValue","discountCodes","handleApplyDiscount","discountPercentage","toUpperCase","discountValue","newTotalCost","handleRemoveDiscount","handleCardNumberChange","e","value","target","formattedValue","replace","simpleEncrypt","split","map","char","String","fromCharCode","charCodeAt","join","handleSubmit","preventDefault","auth","user","currentUser","userId","uid","push","length","encryptedCardNumber","checkoutData","paymentId","toFixed","items","productName","productDescription","imageUrls","sellerId","addCheckout","err","children","className","fileName","_jsxFileName","lineNumber","columnNumber","variant","dismissible","onClose","index","src","alt","onSubmit","Control","type","placeholder","maxLength","onChange","size","onClick","Group","controlId","Text","id","style","width","show","onHide","Header","closeButton","Title","Body","field","_c","$RefreshReg$"],"sources":["C:/Users/hemko/OneDrive - Otago Polytechnic/01_Courses/10_Studio_03/03_Others/Eco-shop/src/components/Checkout.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Alert, Button, Form, InputGroup, Modal } from \"react-bootstrap\";\r\nimport Footer from \"./Footer\";\r\nimport '../css/Checkout.css';\r\nimport CheckoutService from \"../context/CheckoutServices\";\r\nimport HeaderSwitcher from \"./HeaderSwitcher\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useLocation } from 'react-router-dom';\r\nimport { getAuth } from \"firebase/auth\"; // Import Firebase authentication\r\n\r\nfunction Checkout() {\r\n    // State variables for managing checkout details\r\n    const [discountCode, setDiscountCode] = useState([]);\r\n    const [appliedDiscount, setAppliedDiscount] = useState(null);\r\n    const [cardNumber, setCardNumber] = useState(\"\");\r\n    const [address, setAddress] = useState(\"\");\r\n    const [city, setCity] = useState(\"\");\r\n    const [region, setRegion] = useState(\"\");\r\n    const [zipCode, setZipCode] = useState(\"\");\r\n    const [message, setMessage] = useState({ error: false, msg: \"\" });\r\n    const [country, setCountry] = useState(\"\");\r\n    const [subTotal, setSubTotal] = useState(0.00);\r\n    const [discount, setDiscount] = useState(0.00);\r\n    const [serverFee, setServerFee] = useState(0.00);\r\n    const [totalCost, setTotalCost] = useState(0.00);\r\n    const [showModal, setShowModal] = useState(false);\r\n    const [showErrorModal, setShowErrorModal] = useState(false);\r\n    const [missingFields, setMissingFields] = useState([]);\r\n    \r\n    // Get the list of selected products from the current location's state\r\n    const location = useLocation();\r\n    const selectedProducts = location.state?.selectedProducts || [];\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        // Calculate subtotal, server fee, and total cost when products change\r\n        let subtotal = selectedProducts.reduce((acc, item) => acc + item.productPrice, 0);\r\n        setSubTotal(subtotal);\r\n      \r\n        const serverPercentage = 0.15; // 15% server fee\r\n        const serverValue = subtotal * serverPercentage;\r\n        setServerFee(serverValue);\r\n      \r\n        const totalCost = subtotal + serverValue;\r\n        setTotalCost(totalCost);\r\n    }, [selectedProducts]);\r\n    \r\n    // Discount codes and their corresponding discounts\r\n    const discountCodes = {\r\n        \"DISCOUNT50\": 0.50, // 50% discount\r\n        \"DISCOUNT20\": 0.20, // 20% discount\r\n        \"DISCOUNT15\": 0.15, // 15% discount\r\n        \"DISCOUNT10\": 0.10  // 10% discount\r\n    };\r\n\r\n    const handleApplyDiscount = () => {\r\n        // Apply discount based on the provided code\r\n        const discountPercentage = discountCodes[discountCode.toUpperCase()] || 0;\r\n        \r\n        if (discountPercentage > 0) {\r\n            const discountValue = subTotal * discountPercentage;\r\n            const newTotalCost = subTotal - discountValue + serverFee;\r\n\r\n            setDiscount(discountValue);\r\n            setTotalCost(newTotalCost);\r\n            setDiscountCode('');\r\n            setMessage({ error: false, msg: \"Discount applied successfully!\" });\r\n        } else {\r\n            setMessage({ error: true, msg: \"Invalid discount code!\" });\r\n        }\r\n    }; \r\n\r\n    const handleRemoveDiscount = () => {\r\n        // Remove the discount and recalculate total cost\r\n        const newTotalCost = subTotal + serverFee;\r\n        setDiscount(0);\r\n        setTotalCost(newTotalCost);\r\n        setAppliedDiscount(null);\r\n        setMessage({ error: false, msg: \"Discount removed successfully!\" });\r\n    };\r\n    \r\n    const handleCardNumberChange = (e) => {\r\n        // Format the card number with spaces after every 4 digits\r\n        const { value } = e.target;\r\n        let formattedValue = value.replace(/\\D/g, '');\r\n        formattedValue = formattedValue.replace(/(\\d{4})(?=\\d)/g, '$1 ');\r\n        setCardNumber(formattedValue);\r\n    };\r\n    \r\n    // Simple encryption for the card number\r\n    function simpleEncrypt(cardNumber) {\r\n        return cardNumber.split('').map(char => String.fromCharCode(char.charCodeAt(0) + 3)).join('');\r\n    }\r\n    \r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        // Get the logged-in user's ID from Firebase Auth\r\n        const auth = getAuth();\r\n        const user = auth.currentUser;\r\n        const userId = user ? user.uid : null;\r\n\r\n        if (!userId) {\r\n            setMessage({ error: true, msg: \"User not logged in!\" });\r\n            return;\r\n        }\r\n\r\n        setMessage(\"\");\r\n        setMissingFields([]);\r\n\r\n        // Check for any missing mandatory fields\r\n        let missingFields = [];\r\n\r\n        if (address === \"\") missingFields.push(\"Street Address\");\r\n        if (city === \"\") missingFields.push(\"City\");\r\n        if (region === \"\") missingFields.push(\"State/Province/Region\");\r\n        if (zipCode === \"\") missingFields.push(\"Zip/Postal Code\");\r\n        if (country === \"\") missingFields.push(\"Country\");\r\n        if (cardNumber === \"\") missingFields.push(\"Card Number\");\r\n\r\n        if (missingFields.length > 0) {\r\n            setMissingFields(missingFields);\r\n            setShowErrorModal(true);\r\n            return;\r\n        }\r\n\r\n        const encryptedCardNumber = simpleEncrypt(cardNumber);\r\n\r\n        const checkoutData = {\r\n            paymentId: \"\",\r\n            userId: userId,\r\n            cardNumber: encryptedCardNumber || \"\",\r\n            address: address || \"\",\r\n            city: city || \"\",\r\n            region: region || \"\",\r\n            zipCode: zipCode || \"\",\r\n            country: country || \"\",\r\n            serverFee: serverFee.toFixed(2),\r\n            totalCost: totalCost.toFixed(2),\r\n            items: selectedProducts.map(item => ({\r\n                productName: item.productName || \"Unknown Product\",\r\n                productDescription: item.productDescription || \"\",\r\n                productPrice: item.productPrice || 0,\r\n                imageUrls: item.imageUrls || \"\",\r\n                sellerId: item.sellerId || \"Unknown Seller\",\r\n            }))\r\n        };\r\n        \r\n        try {\r\n            await CheckoutService.addCheckout(checkoutData, userId);\r\n            setMessage({ error: false, msg: \"Payment successful!\" });\r\n            setShowModal(true);\r\n        } catch (err) {\r\n            setMessage({ error: true, msg: err.message });\r\n        }\r\n\r\n        // Reset the form fields after successful payment\r\n        setAddress(\"\");\r\n        setCity(\"\");\r\n        setCountry(\"\");\r\n        setRegion(\"\");\r\n        setZipCode(\"\");\r\n        setCardNumber(\"\");\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"p-4 box\">\r\n                <div className=\"wrapper\">\r\n                    <HeaderSwitcher/>\r\n                    <div className=\"main-content\">\r\n                        {message?.msg && (\r\n                            <Alert\r\n                                variant={message?.error ? \"danger\" : \"success\"}\r\n                                dismissible\r\n                                onClose={() => setMessage(\"\")}\r\n                            >\r\n                                {message?.msg}\r\n                            </Alert>\r\n                        )}\r\n                        <h2 className=\"text-center mb-4\">Checkout</h2>\r\n                        <div className=\"products-history\">\r\n                        <h4>Products History</h4>\r\n                        </div>\r\n                        <br/>\r\n                        {selectedProducts.length > 0 ? (\r\n                        <div className=\"row justify-content-center\">\r\n                            {selectedProducts.map((item, index) => (\r\n                            <div className=\"col-md-4\" key={index}>\r\n                                <div className=\"card text-center\">\r\n                                <div className=\"card-body\">\r\n                                    {item.imageUrls && (\r\n                                    <>\r\n                                        <img \r\n                                        src={item.imageUrls[0]} \r\n                                        alt={item.productName} \r\n                                        className=\"card-img-top\"\r\n                                        />\r\n                                    </>\r\n                                    )}\r\n                                    <h5 className=\"card-title\">{item.productName}</h5>\r\n                                    <p className=\"card-text\">{item.productDescription}</p>\r\n                                    <p className=\"card-text\"><strong>Price: ${item.productPrice}</strong></p>\r\n                                </div>\r\n                                </div>\r\n                            </div>\r\n                            ))}\r\n                        </div>\r\n                        ) : (\r\n                        <p>Your cart is empty.</p>\r\n                        )}\r\n                        <br/>\r\n                        <Form onSubmit={handleSubmit}>\r\n                            <div className=\"form-container\">\r\n                                <div className=\"form-box\">\r\n                                    <div className=\"flex-container\">\r\n                                        <InputGroup className=\"input-width\">\r\n                                            <Form.Control\r\n                                                type=\"text\"\r\n                                                placeholder=\"Discount Code\"\r\n                                                maxLength={10}\r\n                                                value={discountCode}\r\n                                                onChange={(e) => setDiscountCode(e.target.value)} \r\n                                            />\r\n                                        </InputGroup>\r\n                                        <Button\r\n                                            variant=\"success\" \r\n                                            size=\"md\" \r\n                                            className=\"apply-button\"\r\n                                            onClick={handleApplyDiscount}\r\n                                        >\r\n                                            Apply    \r\n                                        </Button>\r\n                                        <Button\r\n                                            variant=\"danger\"\r\n                                            size=\"md\"\r\n                                            className=\"remove-button\"\r\n                                            onClick={handleRemoveDiscount}\r\n                                        >\r\n                                            Remove\r\n                                        </Button>\r\n                                    </div> \r\n                                    <Form.Group className=\"mb-3\" controlId=\"formCardNumber\">\r\n                                        <InputGroup>\r\n                                            <InputGroup.Text id=\"formCardNumber\">Card Number </InputGroup.Text>\r\n                                            <Form.Control\r\n                                                type=\"text\"\r\n                                                placeholder=\"xxxx xxxx xxxx xxxx\"\r\n                                                maxLength={19}\r\n                                                value={cardNumber}\r\n                                                onChange={(e) => handleCardNumberChange(e)}\r\n                                                style={{ width: \"100%\" }}\r\n                                            />\r\n                                        </InputGroup>\r\n                                    </Form.Group>\r\n                                    <Form.Group className=\"mb-3\" controlId=\"formAddress\">\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"Street Address\"\r\n                                            value={address}\r\n                                            onChange={(e) => setAddress(e.target.value)}\r\n                                        />\r\n                                    </Form.Group>\r\n                                    <Form.Group className=\"mb-3\" controlId=\"formCity\">\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"City\"\r\n                                            value={city}\r\n                                            onChange={(e) => setCity(e.target.value)}\r\n                                        />\r\n                                    </Form.Group>\r\n                                    <Form.Group className=\"mb-3\" controlId=\"formRegion\">\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"State/Province/Region\"\r\n                                            value={region}\r\n                                            onChange={(e) => setRegion(e.target.value)}\r\n                                        />\r\n                                    </Form.Group>\r\n                                    <Form.Group className=\"mb-3\" controlId=\"formZipCode\">\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"Zip/Postal Code\"\r\n                                            value={zipCode}\r\n                                            onChange={(e) => setZipCode(e.target.value)}\r\n                                        />\r\n                                    </Form.Group>\r\n                                    <Form.Group className=\"mb-3\" controlId=\"formCountry\">\r\n                                        <Form.Control\r\n                                            type=\"text\"\r\n                                            placeholder=\"Country\"\r\n                                            value={country}\r\n                                            onChange={(e) => setCountry(e.target.value)}\r\n                                        />\r\n                                    </Form.Group>\r\n                                    <div className=\"form-footer\">\r\n                                        <Button \r\n                                            variant=\"primary\" \r\n                                            size=\"lg\" \r\n                                            type=\"submit\"\r\n                                            style={{ width: \"100%\" }}\r\n                                        >\r\n                                            Place Order\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"summary-box\">\r\n                                    <h4>Order Summary</h4>\r\n                                    <div className=\"summary-row\">\r\n                                        <span>Subtotal:</span>\r\n                                        <span>${subTotal.toFixed(2)}</span>\r\n                                    </div>\r\n                                    <div className=\"summary-row\">\r\n                                        <span>Discount:</span>\r\n                                        <span>-${discount.toFixed(2)}</span>\r\n                                    </div>\r\n                                    <div className=\"summary-row\">\r\n                                        <span>Server Fee:</span>\r\n                                        <span>${serverFee.toFixed(2)}</span>\r\n                                    </div>\r\n                                    <div className=\"summary-row\">\r\n                                        <span><strong>Total Cost:</strong></span>\r\n                                        <span><strong>${totalCost.toFixed(2)}</strong></span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Form>\r\n                    </div>\r\n                    <Footer />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modal for successful payment */}\r\n            <Modal show={showModal} onHide={() => setShowModal(false)}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Payment Successful</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>Your payment has been processed successfully. Thank you for your purchase!</Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => navigate('/order-history')}>Go to Order History</Button>\r\n                    <Button variant=\"primary\" onClick={() => navigate('/')}>Back to Home</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n\r\n            {/* Modal for missing fields error */}\r\n            <Modal show={showErrorModal} onHide={() => setShowErrorModal(false)}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Missing Fields</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <p>Please fill in the following required fields:</p>\r\n                    <ul>\r\n                        {missingFields.map((field, index) => (\r\n                            <li key={index}>{field}</li>\r\n                        ))}\r\n                    </ul>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => setShowErrorModal(false)}>Close</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Checkout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}